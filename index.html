<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="'icon" type="image/png" href="progenx ai icon.png"/>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Agentic Studio Prototype</title>
    <!-- 1. Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- 2. Mermaid.js -->
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
    <style>
        /* Simple transition for stage visibility */
        .stage {
            display: none;
            opacity: 0;
            transition: opacity 0.5s ease-in-out;
        }
        .stage.visible {
            display: block;
            opacity: 1;
        }
        /* Custom styles for mermaid graph */
        .mermaid svg {
            margin: auto;
        }
        /* Fix for loader icon spin */
        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        .animate-spin {
            animation: spin 1s linear infinite;
        }
    </style>
</head>
<body class="bg-gray-100 font-sans">

    <div class="max-w-7xl mx-auto p-4 md:p-8">
        <!-- Header -->
        <header class="mb-8 text-center">
            <h1 class="4xl font-bold text-gray-900">Agentic Studio</h1>
            <p class="text-lg text-gray-600 mt-2">The "Generator-First" Platform (HTML Prototype)</p>
        </header>

        <!-- Stage 1: Define Process -->
        <section id="stage-1" class="stage visible bg-white p-6 md:p-8 rounded-xl shadow-lg border border-gray-200">
            <div class="flex items-center text-indigo-600 mb-4">
                <div class="p-3 bg-indigo-100 rounded-full">
                    <!-- Icon: FilePlus -->
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-6 h-6"><path d="M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z"/><path d="M12 9v6"/><path d="M9 12h6"/></svg>
                </div>
                <h2 class="text-2xl font-semibold ml-4">Stage 1: Define Process</h2>
            </div>
            
            <div class="mb-4 border-b border-gray-200">
                <nav class="flex space-x-4" aria-label="Tabs">
                    <button id="tab-text" class="tab-btn px-3 py-2 font-medium text-sm rounded-t-lg border-b-2 border-indigo-500 text-indigo-600">
                        <!-- Icon: FileText -->
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-4 h-4 inline-block mr-1"><path d="M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z"/><path d="M14 2v4a2 2 0 0 0 2 2h4"/><path d="M10 9H8"/><path d="M16 13H8"/><path d="M16 17H8"/></svg>
                        Text
                    </button>
                    <button id="tab-voice" class="tab-btn px-3 py-2 font-medium text-sm rounded-t-lg border-b-2 border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300">
                        <!-- Icon: Mic -->
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-4 h-4 inline-block mr-1"><path d="M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z"/><path d="M19 10v2a7 7 0 0 1-14 0v-2"/><line x1="12" x2="12" y1="19" y2="22"/></svg>
                        Voice
                    </button>
                    <button id="tab-logs" class="tab-btn px-3 py-2 font-medium text-sm rounded-t-lg border-b-2 border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300">
                        <!-- Icon: ScrollText -->
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-4 h-4 inline-block mr-1"><path d="M8 3H7a2 2 0 0 0-2 2v5a2 2 0 0 1-2 2 2 2 0 0 1 2 2v5a2 2 0 0 0 2 2h1"/><path d="M18 22h-8a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8"/><path d="M18 17H12"/><path d="M18 12H12"/><path d="M18 7H12"/></svg>
                        Logs
                    </button>
                </nav>
            </div>

            <div id="tab-content-text" class="input-area space-y-4">
                <textarea id="steps" rows="8" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500">1. Read the attached PDF invoice from the email.
2. Extract vendor name, amount, and Purchase Order (PO) number.
3. Check Salesforce to see if the vendor is marked as 'Preferred'.
4. Check QuickBooks to see if this is a 'New Vendor' (no history).
5. Cross-reference the PO number in QuickBooks to see if it's valid.
6. If the PO number is invalid, REJECT the invoice and email the sender.
7. If the vendor is 'Preferred' AND the amount is under $5,000, auto-approve and pay.
8. If the vendor is 'New', route to #vendor-onboarding on Slack for approval first.
9. If the amount is over $5,000 (even for a preferred vendor), it must be sent to the #finance channel for approval.
10. If the amount is over $20,000, it needs approval from BOTH #finance AND the @CFO directly.</textarea>
            </div>
            <div id="tab-content-voice" class="input-area text-center p-4 border-2 border-dashed border-gray-300 rounded-lg" style="display: none;">
                <button id="btn-record-voice" class="bg-red-600 text-white font-medium py-3 px-6 rounded-lg shadow-md hover:bg-red-700 transition-all flex items-center justify-center mx-auto disabled:opacity-50">
                    <!-- Icon: Mic -->
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-5 h-5 mr-2"><path d="M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z"/><path d="M19 10v2a7 7 0 0 1-14 0v-2"/><line x1="12" x2="12" y1="19" y2="22"/></svg>
                    Start Recording
                </button>
                <p id="voice-status" class="text-gray-500 text-sm mt-3"></p>
            </div>
            <div id="tab-content-logs" class="input-area text-center p-4 border-2 border-dashed border-gray-300 rounded-lg" style="display: none;">
                <button id="btn-upload-logs" class="bg-gray-600 text-white font-medium py-3 px-6 rounded-lg shadow-md hover:bg-gray-700 transition-all flex items-center justify-center mx-auto disabled:opacity-50">
                    <!-- Icon: UploadCloud -->
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-5 h-5 mr-2"><path d="M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242"/><path d="M12 12v9"/><path d="m16 16-4-4-4 4"/></svg>
                    Upload System Logs
                </button>
                <p id="logs-status" class="text-gray-500 text-sm mt-3"></p>
            </div>
            
            <div class="mt-6 text-center">
                <button id="analyze-button" class="bg-indigo-600 text-white font-medium py-3 px-6 rounded-lg shadow-md hover:bg-indigo-700 transition-all flex items-center justify-center mx-auto w-full md:w-1/2 disabled:opacity-50">
                    <span class="mr-2">Analyze Process & Build Graph</span>
                    <!-- Icon: ArrowDown -->
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-5 h-5"><line x1="12" x2="12" y1="5" y2="19"/><polyline points="19 12 12 19 5 12"/></svg>
                </button>
            </div>
        </section>

        <!-- --- Stage 2: Validate Graph --- -->
        <section id="stage-2" class="stage mt-8">
            <div class="flex justify-center my-4">
                <!-- Icon: ChevronDown -->
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-8 h-8 text-gray-400"><path d="m6 9 6 6 6-6"/></svg>
            </div>
            <div class="bg-white p-6 md:p-8 rounded-xl shadow-lg border border-gray-200">
                <div class="flex items-center text-blue-600 mb-4">
                    <div class="p-3 bg-blue-100 rounded-full">
                        <!-- Icon: Share2 -->
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-6 h-6"><circle cx="18" cy="5" r="3"/><circle cx="6" cy="12" r="3"/><circle cx="18" cy="19" r="3"/><line x1="8.59" x2="15.42" y1="13.51" y2="17.49"/><line x1="15.41" x2="8.59" y1="6.51" y2="10.49"/></svg>
                    </div>
                    <h2 class="text-2xl font-semibold ml-4">Stage 2: Validate Process Graph</h2>
                </div>
                <p class="text-gray-600 mb-6">A visual graph of the process has been generated. Please review and approve. You can edit the graph logic below before proceeding.</p>

                <div id="mermaid-graph" class="mermaid w-full h-auto text-center">
                    <!-- Graph will be rendered here -->
                </div>
                
                <div id="edit-graph-area" class="mt-4" style="display: none;">
                    <label for="mermaid-code" class="block text-sm font-medium text-gray-700">Graph Definition (Mermaid Syntax)</label>
                    <textarea id="mermaid-code" rows="10" class="mt-1 block w-full font-mono text-sm px-3 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"></textarea>
                    <button id="btn-rerender" class="mt-2 bg-gray-500 text-white font-medium py-2 px-4 rounded-lg hover:bg-gray-600 transition-all flex items-center">
                        <!-- Icon: RefreshCw -->
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-4 h-4 mr-2"><path d="M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"/><path d="M21 3v5h-5"/><path d="M3 21v-5h5"/><path d="M5.26 18.74A9.75 9.75 0 0 1 12 15a9 9 0 0 1 9 9"/></svg>
                        Re-render Graph
                    </button>
                </div>

                <div class="mt-6 flex flex-col md:flex-row justify-center gap-4">
                    <button id="btn-edit-graph" class="w-full md:w-auto bg-gray-100 text-gray-700 font-medium py-3 px-6 rounded-lg border border-gray-300 hover:bg-gray-200 transition-all flex items-center justify-center">
                        <!-- Icon: Edit -->
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-5 h-5 mr-2"><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"/></svg>
                        Edit Graph
                    </button>
                    <button id="btn-approve" class="w-full md:w-auto bg-blue-600 text-white font-medium py-3 px-6 rounded-lg shadow-md hover:bg-blue-700 transition-all flex items-center justify-center disabled:opacity-50">
                        <!-- Icon: CheckCheck -->
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-5 h-5 mr-2"><path d="M18 6 7 17l-5-5"/><path d="m22 10-7.5 7.5L13 16"/></svg>
                        Approve & Generate JSON
                    </button>
                </div>
            </div>
        </section>

        <!-- --- Stage 3: Proto-Workflow (JSON) --- -->
        <section id="stage-3" class="stage mt-8 bg-white p-6 md:p-8 rounded-xl shadow-lg border border-gray-200">
            <div class="flex items-center text-purple-600 mb-4">
                <div class="p-3 bg-purple-100 rounded-full">
                    <!-- Icon: FileJson2 -->
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-6 h-6"><path d="M4 22h16a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v13.5a2.5 2.5 0 0 1-5 0V3"/><path d="M8 18h2"/><path d="M8 13h2"/><path d="M8 8h2"/></svg>
                </div>
                <h2 class="text-2xl font-semibold ml-4">Stage 3: Proto-Workflow (JSON)</h2>
            </div>
            <p class="text-gray-600 mb-6">The approved graph is converted into a machine-readable JSON decision tree.</p>
            <pre id="analyzer-output" class="bg-gray-900 text-white text-sm rounded-lg p-4 overflow-x-auto"><code class="language-json">
{
  "objective": "Process new vendor invoices correctly.",
  "trigger": { "type": "email", "source": "invoices@mycompany.com" },
  "tools": ["gmail", "pdf_reader", "salesforce", "quickbooks", "slack"],
  "tasks": [
    { "id": "A", "task": "Start", "next_task": "B" },
    { "id": "B", "task": "Read Invoice & Extract Data", "agent": "Scanner", "next_task": "C" },
    { "id": "C", "task": "Check PO Valid?", "agent": "Validator", "type": "condition", "if_true": "D", "if_false": "G" },
    { "id": "G", "task": "REJECT Invoice - Bad PO", "agent": "Notifier" },
    { "id": "D", "task": "Check Vendor Status (New/Preferred)", "agent": "Validator", "next_task": "E" },
    { "id": "E", "task": "Route based on Logic", "agent": "Router", "type": "decision_tree",
      "branches": [
        { "condition": "vendor_status == 'New'", "next_task": "H" },
        { "condition": "amount > 20000", "next_task": "J" },
        { "condition": "amount > 5000", "next_task": "I" },
        { "condition": "vendor_status == 'Preferred' && amount <= 5000", "next_task": "F" }
      ]
    },
    { "id": "F", "task": "Auto-Approve & Pay", "agent": "Accountant" },
    { "id": "H", "task": "Approval: vendor-onboarding", "agent": "Notifier", "ui_component": "ApprovalCard" },
    { "id": "I", "task": "Approval: finance", "agent": "Notifier", "ui_component": "ApprovalCard" },
    { "id": "J", "task": "Approval: finance AND @CFO", "agent": "Notifier", "ui_component": "ApprovalCard" }
  ]
}
            </code></pre>
            <div class="mt-6 text-center">
                <button id="generate-button" class="bg-purple-600 text-white font-medium py-3 px-6 rounded-lg shadow-md hover:bg-purple-700 transition-all flex items-center justify-center mx-auto disabled:opacity-50">
                    Generate Code & UI
                    <!-- Icon: ArrowRight -->
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-5 h-5 ml-2"><line x1="5" x2="19" y1="12" y2="12"/><polyline points="12 5 19 12 12 19"/></svg>
                </button>
            </div>
        </section>

        <!-- --- Stage 4: Code Generation & UI --- -->
        <section id="stage-4" class="stage mt-8 bg-white p-6 md:p-8 rounded-xl shadow-lg border border-gray-200">
            <div class="flex items-center text-green-600 mb-4">
                <div class="p-3 bg-green-100 rounded-full">
                    <!-- Icon: Cpu -->
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-6 h-6"><rect x="4" y="4" width="16" height="16" rx="2"/><rect x="9" y="9" width="6" height="6"/><path d="M15 2v2"/><path d="M15 20v2"/><path d="M2 15h2"/><path d="M2 9h2"/><path d="M20 15h2"/><path d="M20 9h2"/><path d="M9 2v2"/><path d="M9 20v2"/></svg>
                </div>
                <h2 class="text-2xl font-semibold ml-4">Stage 4: Generate Code & UI</h2>
            </div>
            <p class="text-gray-600 mb-6">Python agent code and React UI components are generated from the JSON.</p>
            
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div>
                    <h3 class="text-lg font-medium text-gray-800 mb-2">Python Agent Code</h3>
                    <pre id="generator-output" class="bg-gray-900 text-white text-sm rounded-lg p-4 h-96 overflow-x-auto"><code class="language-python">
# ... (Agents are defined based on JSON) ...
scanner = Agent(role='Scanner', ...)
validator = Agent(role='Validator', ...)
router = Agent(role='Router', ...)
# ...

# --- Tasks ---
task_read_invoice = Task(description="Read Invoice & Extract Data", agent=scanner)
task_check_po = Task(description="Check PO Valid?", agent=validator)
task_reject_invoice = Task(description="REJECT Invoice - Bad PO", agent=notifier)
task_check_status = Task(description="Check Vendor Status", agent=validator)
task_router = Task(description="Route based on Logic", agent=router)
task_auto_pay = Task(description="Auto-Approve & Pay", agent=accountant)
# ... (all other tasks defined)

# --- Hierarchical Crew Definition ---
def get_next_task(manager_agent, task_result):
    # This logic is built from the JSON graph
    # (Simplified for demo)
    if task_result.task.id == 'C':
        if task_result.output.po_valid:
            return 'D' # Go to Check Vendor Status
        else:
            return 'G' # Go to REJECT
    # ...
    return None # End

crew = Crew(
  agents=[scanner, validator, router, accountant, notifier],
  tasks=[...], # All tasks
  process=Process.hierarchical,
  manager_llm=... # A smart model
)
                    </code></pre>
                </div>
                <div>
                    <h3 class="text-lg font-medium text-gray-800 mb-2">React UI Code</h3>
                    <pre id="ui-output" class="bg-gray-900 text-white text-sm rounded-lg p-4 h-96 overflow-x-auto"><code class="language-javascript">
// Generated based on "ui_component": "ApprovalCard"
import React from 'react';

export default function ApprovalCard({ task }) {
  const { invoiceId, amount, vendor } = task.data;

  const handleApprove = () => {
    // call_agent_api(task.id, "approve")
  };

  return (
    &lt;div className="p-4 border rounded-lg shadow-sm"&gt;
      &lt;h4 className="font-bold"&gt;{task.description}&lt;/h4&gt;
      &lt;p&gt;Invoice: {invoiceId}&lt;/p&gt;
      &lt;p&gt;Vendor: {vendor}&lt;/p&gt;
      &lt;p&gt;Amount: ${amount}&lt;/p&gt;
      &lt;div className="flex gap-4 mt-4"&gt;
        &lt;button 
          onClick={handleApprove}
          className="bg-green-500 ..."
        &gt;
          Approve
        &lt;/button&gt;
        {/* ... */}
      &lt;/div&gt;
    &lt;/div&gt;
  );
}
                    </code></pre>
                </div>
            </div>

            <div class="mt-6 text-center">
                <button id="test-plan-button" class="bg-green-600 text-white font-medium py-3 px-6 rounded-lg shadow-md hover:bg-green-700 transition-all flex items-center justify-center mx-auto">
                    Proceed to Test Plan
                    <!-- Icon: ArrowRight -->
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-5 h-5 ml-2"><line x1="5" x2="19" y1="12" y2="12"/><polyline points="12 5 19 12 12 19"/></svg>
                </button>
            </div>
        </section>

        <!-- --- Stage 5: Test Plan & Run --- -->
        <section id="stage-5" class="stage mt-8 bg-white p-6 md:p-8 rounded-xl shadow-lg border border-gray-200">
            <div class="flex items-center text-red-600 mb-4">
                <div class="p-3 bg-red-100 rounded-full">
                    <!-- Icon: ClipboardCheck -->
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-6 h-6"><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"/><path d="M12 11h4"/><path d="M12 16h4"/><path d="M8 11h.01"/><path d="M8 16h.01"/><rect x="8" y="2" width="8" height="4" rx="1"/><path d="m14 17 3 3 5-5"/></svg>
                </div>
                <h2 class="text-2xl font-semibold ml-4">Stage 5: Test Plan & Run</h2>
            </div>
            <p class="text-gray-600 mb-6">Review the auto-generated test plan and run the full test suite before deployment.</p>
            
            <div class="mb-6 space-y-3">
                <h3 class="text-lg font-medium text-gray-800 mb-2">Generated Test Suite</h3>
                <!-- Test cases -->
                <div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg border">
                    <span class="font-medium text-gray-700">Test Case 1: Valid PO, Preferred, &lt; $5k</span>
                    <span class="text-sm text-gray-500">Expected: Auto-Approve & Pay</span>
                </div>
                <div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg border">
                    <span class="font-medium text-gray-700">Test Case 2: Valid PO, Preferred, &gt; $5k</span>
                    <span class="text-sm text-gray-500">Expected: Route to #finance</span>
                </div>
                <div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg border">
                    <span class="font-medium text-gray-700">Test Case 3: Valid PO, Preferred, &gt; $20k</span>
                    <span class="text-sm text-gray-500">Expected: Route to #finance AND @CFO</span>
                </div>
                <div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg border">
                    <span class="font-medium text-gray-700">Test Case 4: Valid PO, New Vendor</span>
                    <span class="text-sm text-gray-500">Expected: Route to #vendor-onboarding</span>
                </div>
                <div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg border">
                    <span class="font-medium text-gray-700">Test Case 5: Invalid PO</span>
                    <span class="text-sm text-gray-500">Expected: REJECT Invoice</span>
                </div>
            </div>

            <div class="text-center">
                <button id="run-test-button" class="bg-red-600 text-white font-medium py-3 px-6 rounded-lg shadow-md hover:bg-red-700 transition-all flex items-center justify-center mx-auto disabled:opacity-50">
                    <!-- Icon: Play -->
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-5 h-5 mr-2"><polygon points="5 3 19 12 5 21 5 3"/></svg>
                    Run Test Suite
                </button>
            </div>

            <div id="test-log-wrapper" class="w-full bg-gray-900 rounded-lg p-4 h-96 flex flex-col mt-6" style="display: none;">
                <div class="flex-shrink-0 flex items-center justify-between pb-2 border-b border-gray-700">
                    <span class="text-sm font-medium text-white">logs/test-suite.log</span>
                    <div id="test-live-indicator" class="flex items-center space-x-2 text-green-400">
                        <div class="w-2 h-2 bg-green-400 rounded-full animate-pulse"></div>
                        <span class="text-xs font-medium">RUNNING</span>
                    </div>
                </div>
                <div id="log-container" class="log-container flex-1 overflow-y-auto mt-2 text-sm font-mono text-gray-300 space-y-1 pr-2">
                    <!-- Logs will be inserted here -->
                </div>
            </div>
            
            <div id="deploy-button-wrapper" class="mt-6 text-center" style="display: none;">
                <button id="deploy-button" class="bg-gray-800 text-white font-medium py-3 px-6 rounded-lg shadow-md hover:bg-gray-900 transition-all flex items-center justify-center mx-auto">
                    Proceed to Deploy
                    <!-- Icon: ArrowRight -->
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-5 h-5 ml-2"><line x1="5" x2="19" y1="12" y2="12"/><polyline points="12 5 19 12 12 19"/></svg>
                </button>
            </div>
        </section>

        <!-- --- Stage 6: Deploy --- -->
        <section id="stage-6" class="stage mt-8 bg-white p-6 md:p-8 rounded-xl shadow-lg border border-gray-200">
            <div class="flex items-center text-gray-800 mb-4">
                <div class="p-3 bg-gray-200 rounded-full">
                    <!-- Icon: Rocket -->
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-6 h-6"><path d="M4.5 16.5c-1.5 1.5-3 1.5-4.5 0s1.5-3 0-4.5L5.5 8l4 4L16 8.5l4 4L19.5 16c-1.5 1.5-3 1.5-4.5 0s1.5-3 0-4.5L12 8l-3 3-1.5 1.5Z"/><path d="m12 15 6 6"/><path d="m21 21-6-6"/></svg>
                </div>
                <h2 class="text-2xl font-semibold ml-4">Stage 6: Deploy to Platform</h2>
            </div>
            <p class="text-gray-600 mb-6">All steps are complete. The agent package (code, UI, test results) is ready to be published to the enterprise platform.</p>
            
            <div class="text-center">
                <button id="publish-button" class="bg-gray-800 text-white font-medium py-3 px-6 rounded-lg shadow-md hover:bg-gray-900 transition-all flex items-center justify-center mx-auto disabled:opacity-50">
                    <!-- Icon: Rocket -->
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-5 h-5 mr-2"><path d="M4.5 16.5c-1.5 1.5-3 1.5-4.5 0s1.5-3 0-4.5L5.5 8l4 4L16 8.5l4 4L19.5 16c-1.5 1.5-3 1.5-4.5 0s1.5-3 0-4.5L12 8l-3 3-1.5 1.5Z"/><path d="m12 15 6 6"/><path d="m21 21-6-6"/></svg>
                    Publish to Enterprise Platform
                </button>
            </div>

            <div id="deploy-log-wrapper" class="w-full bg-gray-900 rounded-lg p-4 h-64 flex flex-col mt-6" style="display: none;">
                <div class="flex-shrink-0 flex items-center justify-between pb-2 border-b border-gray-700">
                    <span class="text-sm font-medium text-white">logs/deployment.log</span>
                </div>
                <div id="deploy-log-container" class="log-container flex-1 overflow-y-auto mt-2 text-sm font-mono text-gray-300 space-y-1 pr-2">
                    <!-- Deploy logs will be inserted here -->
                </div>
            </div>
        </section>
    </div>

    <!-- The Loader Icon (hidden, used for buttons) -->
    <!-- Icon: Loader -->
    <svg id="loader-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-5 h-5 mr-2 animate-spin" style="display: none;">
        <line x1="12" x2="12" y1="2" y2="6"/><line x1="12" x2="12" y1="18" y2="22"/><line x1="4.93" x2="7.76" y1="4.93" y2="7.76"/><line x1="16.24" x2="19.07" y1="16.24" y2="19.07"/><line x1="2" x2="6" y1="12" y2="12"/><line x1="18" x2="22" y1="12" y2="12"/><line x1="4.93" x2="7.76" y1="19.07" y2="16.24"/><line x1="16.24" x2="19.07" y1="7.76" y2="4.93"/>
    </svg>

    <!-- 3. Main Application Logic -->
    <script>
        // --- Initialize Mermaid ---
        mermaid.initialize({
            startOnLoad: false,
            theme: 'base',
            themeVariables: {
                'primaryColor': '#f9fafb',
                'primaryBorderColor': '#d1d5db',
                'lineColor': '#6b7280',
                'textColor': '#111827',
            }
        });

        // --- DOM Elements ---
        const stages = {
            1: document.getElementById('stage-1'),
            2: document.getElementById('stage-2'),
            3: document.getElementById('stage-3'),
            4: document.getElementById('stage-4'),
            5: document.getElementById('stage-5'),
            6: document.getElementById('stage-6'),
        };
        
        const tabs = {
            text: document.getElementById('tab-text'),
            voice: document.getElementById('tab-voice'),
            logs: document.getElementById('tab-logs'),
        };
        const tabContents = {
            text: document.getElementById('tab-content-text'),
            voice: document.getElementById('tab-content-voice'),
            logs: document.getElementById('tab-content-logs'),
        };
        
        const buttons = {
            recordVoice: document.getElementById('btn-record-voice'),
            uploadLogs: document.getElementById('btn-upload-logs'),
            analyze: document.getElementById('analyze-button'),
            editGraph: document.getElementById('btn-edit-graph'),
            rerender: document.getElementById('btn-rerender'),
            approve: document.getElementById('btn-approve'),
            generate: document.getElementById('generate-button'),
            proceedToTest: document.getElementById('test-plan-button'),
            runTest: document.getElementById('run-test-button'),
            proceedToDeploy: document.getElementById('deploy-button'),
            publish: document.getElementById('publish-button'),
        };
        
        const inputs = {
            steps: document.getElementById('steps'),
            mermaidCode: document.getElementById('mermaid-code'),
        };
        
        const containers = {
            voiceStatus: document.getElementById('voice-status'),
            logsStatus: document.getElementById('logs-status'),
            mermaidGraph: document.getElementById('mermaid-graph'),
            editGraphArea: document.getElementById('edit-graph-area'),
            testLogWrapper: document.getElementById('test-log-wrapper'),
            testLog: document.getElementById('log-container'),
            testLiveIndicator: document.getElementById('test-live-indicator'),
            deployButtonWrapper: document.getElementById('deploy-button-wrapper'),
            deployLogWrapper: document.getElementById('deploy-log-wrapper'),
            deployLog: document.getElementById('deploy-log-container'),
        };

        const loaderIcon = document.getElementById('loader-icon').cloneNode(true);
        loaderIcon.removeAttribute('id');
        loaderIcon.removeAttribute('style');

        // --- State ---
        let currentStage = 1;
        let isGraphEditing = false;
        let logInterval;

        // --- Helper: Set Button Loading State ---
        function setLoading(button, isLoading, text) {
            button.disabled = isLoading;
            if (isLoading) {
                const originalText = button.querySelector('span') ? button.querySelector('span').textContent : button.textContent;
                button.dataset.originalText = originalText;
                button.innerHTML = '';
                button.appendChild(loaderIcon.cloneNode(true));
                button.appendChild(document.createTextNode(` ${text}...`));
            } else {
                button.innerHTML = button.dataset.originalText || text;
                // Re-add icons if they were there
                if (button.id === 'analyze-button') {
                    button.innerHTML = '<span class="mr-2">Analyze Process & Build Graph</span>';
                    button.innerHTML += `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-5 h-5"><line x1="12" x2="12" y1="5" y2="19"/><polyline points="19 12 12 19 5 12"/></svg>`;
                } else if (button.id === 'btn-approve') {
                    button.innerHTML = `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-5 h-5 mr-2"><path d="M18 6 7 17l-5-5"/><path d="m22 10-7.5 7.5L13 16"/></svg> Approve & Generate JSON`;
                } else if (button.id === 'generate-button') {
                     button.innerHTML = `Generate Code & UI <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-5 h-5 ml-2"><line x1="5" x2="19" y1="12" y2="12"/><polyline points="12 5 19 12 12 19"/></svg>`;
                } else if (button.id === 'run-test-button') {
                    button.innerHTML = `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-5 h-5 mr-2"><polygon points="5 3 19 12 5 21 5 3"/></svg> Run Test Suite`;
                } else if (button.id === 'publish-button') {
                     button.innerHTML = `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-5 h-5 mr-2"><path d="M4.5 16.5c-1.5 1.5-3 1.5-4.5 0s1.5-3 0-4.5L5.5 8l4 4L16 8.5l4 4L19.5 16c-1.5 1.5-3 1.5-4.5 0s1.5-3 0-4.5L12 8l-3 3-1.5 1.5Z"/><path d="m12 15 6 6"/><path d="m21 21-6-6"/></svg> Publish to Enterprise Platform`;
                }
            }
        }

        // --- Helper: Switch Active Stage ---
        function showStage(stageNum) {
            currentStage = stageNum;
            for (let i = 1; i <= 6; i++) {
                if (i <= stageNum) {
                    stages[i].classList.add('visible');
                } else {
                    stages[i].classList.remove('visible');
                }
            }
            // Scroll to the new stage
            if (stageNum > 1) {
                stages[stageNum].scrollIntoView({ behavior: 'smooth', block: 'start' });
            }
        }

        // --- Helper: Render Mermaid Graph ---
        async function renderMermaid(definition) {
            try {
                // A unique ID is needed for mermaid.render to find the element
                const svgId = 'mermaid-svg-' + Date.now();
                const { svg } = await mermaid.render(svgId, definition);
                containers.mermaidGraph.innerHTML = svg;
            } catch (e) {
                containers.mermaidGraph.innerHTML = `<div class="p-4 bg-red-100 text-red-700 rounded-lg"><strong>Graph Render Error:</strong> ${e.message}.</div>`;
                console.error("Mermaid Render Error:", e.message);
            }
        }
        
        // --- Helper: Add to Log ---
        function addLog(container, logLines, onComplete) {
            clearInterval(logInterval);
            container.innerHTML = '';
            let step = 0;
            
            const logColors = {
                'INFO': 'text-gray-300',
                'THOUGHT': 'text-yellow-300 italic',
                'ACTION': 'text-blue-300 font-medium',
                'TOOL': 'text-cyan-300',
                'SUCCESS': 'text-green-400 font-bold',
                'ERROR': 'text-red-400 font-bold',
                'DECISION': 'text-purple-400 font-medium',
                'TEST': 'text-white font-bold'
            };

            logInterval = setInterval(() => {
                if (step < logLines.length) {
                    const line = logLines[step];
                    const color = logColors[line.type] || 'text-gray-300';
                    container.innerHTML += `<div class="${color}"><span class="text-gray-500">${new Date().toISOString()}</span> [${line.type}] ${line.text}</div>`;
                    container.scrollTop = container.scrollHeight; // Auto-scroll
                    step++;
                } else {
                    clearInterval(logInterval);
                    if (onComplete) onComplete();
                }
            }, 800);
        }

        // --- Tab Navigation ---
        Object.keys(tabs).forEach(key => {
            tabs[key].addEventListener('click', () => {
                Object.keys(tabs).forEach(k => {
                    tabs[k].classList.remove('border-indigo-500', 'text-indigo-600');
                    tabs[k].classList.add('border-transparent', 'text-gray-500', 'hover:text-gray-700', 'hover:border-gray-300');
                    tabContents[k].style.display = 'none';
                });
                tabs[key].classList.add('border-indigo-500', 'text-indigo-600');
                tabs[key].classList.remove('border-transparent', 'text-gray-500');
                tabContents[key].style.display = 'block';
            });
        });
        
        // --- Input Simulations ---
        buttons.recordVoice.addEventListener('click', () => {
            setLoading(buttons.recordVoice, true, 'Recording');
            containers.voiceStatus.textContent = 'Recording... (simulating)';
            setTimeout(() => {
                containers.voiceStatus.textContent = 'Recording complete. Analyzing transcript...';
                setTimeout(() => {
                    const transcript = "Okay, so first the invoice email comes in. I need someone to read the PDF... then check the PO in QuickBooks. If the PO is bad, just reject it. If it's good, check the vendor in Salesforce. If they're new, send to #vendor-onboarding... if they're preferred and it's under 5k, just pay it. If it's over 5k, send to #finance... oh, and if it's over 20k, you have to ping the @CFO too.";
                    inputs.steps.value = transcript;
                    tabs.text.click();
                    containers.voiceStatus.textContent = '';
                    setLoading(buttons.recordVoice, false, 'Start Recording');
                    buttons.recordVoice.innerHTML = `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-5 h-5 mr-2"><path d="M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z"/><path d="M19 10v2a7 7 0 0 1-14 0v-2"/><line x1="12" x2="12" y1="19" y2="22"/></svg> Start Recording`;
                }, 2000);
            }, 3000);
        });
        
        buttons.uploadLogs.addEventListener('click', () => {
            setLoading(buttons.uploadLogs, true, 'Parsing');
            containers.logsStatus.textContent = 'Parsing logs... (simulating)';
            setTimeout(() => {
                const logData = `[INFO] trigger: email at invoices@...
[INFO] tool: gmail.read(latest) -> attachment: inv_123.pdf
[INFO] tool: pdf.read(inv_123.pdf) -> { vendor: "NewTech", amount: 25000, po: "PO-987" }
[INFO] tool: salesforce.check_vendor("NewTech") -> { status: "Not Found" }
[INFO] tool: quickbooks.check_vendor("NewTech") -> { exists: false }
[DECISION] status: 'New Vendor'.
[ACTION] tool: slack.send("#vendor-onboarding", ...) -> { success: true }
[DECISION] amount: 25000 > 20000.
[ACTION] tool: slack.send("#finance", ...) -> { success: true }
[ACTION] tool: slack.send("@CFO", ...) -> { success: true }`;
                inputs.steps.value = logData;
                tabs.text.click();
                containers.logsStatus.textContent = '';
                setLoading(buttons.uploadLogs, false, 'Upload System Logs');
                buttons.uploadLogs.innerHTML = `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-5 h-5 mr-2"><path d="M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242"/><path d="M12 12v9"/><path d="m16 16-4-4-4 4"/></svg> Upload System Logs`;
            }, 2500);
        });

        // --- Staging Logic ---
        buttons.analyze.addEventListener('click', () => {
            setLoading(buttons.analyze, true, 'Analyzing');
            showStage(1); // Reset to stage 1
            
            // This is the "magic" - generating the Mermaid graph from text
            // ** FIXED: Removed special characters and leading whitespace **
            const newGraphDefinition = `flowchart TD
    A[Start] --> B(Read Invoice & Extract Data)
    B --> C{Check PO Valid?}
    C -- "Yes" --> D(Check Vendor Status)
    C -- "No" --> G[REJECT Invoice - Bad PO]
    D --> E{Route based on Logic}
    E -- "New Vendor" --> H[Approval: vendor-onboarding]
    E -- "Preferred AND Under $5k" --> F[Auto-Approve & Pay]
    E -- "Over $5k" --> I[Approval: finance]
    E -- "Over $20k" --> J[Approval: finance AND @CFO]`;
            
            setTimeout(() => {
                inputs.mermaidCode.value = newGraphDefinition;
                renderMermaid(newGraphDefinition);
                showStage(2);
                setLoading(buttons.analyze, false);
            }, 2500);
        });
        
        buttons.editGraph.addEventListener('click', () => {
            isGraphEditing = !isGraphEditing;
            containers.editGraphArea.style.display = isGraphEditing ? 'block' : 'none';
            buttons.editGraph.innerHTML = isGraphEditing ? 
                `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-5 h-5 mr-2"><path d="M18 6 6 18"/><path d="m6 6 12 12"/></svg> Close Editor` : 
                `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-5 h-5 mr-2"><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"/></svg> Edit Graph`;
        });

        buttons.rerender.addEventListener('click', () => {
            renderMermaid(inputs.mermaidCode.value);
        });
        
        buttons.approve.addEventListener('click', () => {
            setLoading(buttons.approve, true, 'Approving');
            setTimeout(() => {
                showStage(3);
                setLoading(buttons.approve, false);
            }, 1500);
        });
        
        buttons.generate.addEventListener('click', () => {
            setLoading(buttons.generate, true, 'Generating');
            setTimeout(() => {
                showStage(4);
                setLoading(buttons.generate, false);
            }, 2000);
        });

        buttons.proceedToTest.addEventListener('click', () => {
            showStage(5);
        });
        
        buttons.runTest.addEventListener('click', () => {
            setLoading(buttons.runTest, true, 'Running');
            containers.testLogWrapper.style.display = 'flex';
            containers.testLiveIndicator.innerHTML = `<div class="w-2 h-2 bg-green-400 rounded-full animate-pulse"></div><span class="text-xs font-medium">RUNNING</span>`;
            containers.deployButtonWrapper.style.display = 'none';

            const logSteps = [
                { text: 'Starting Test Suite...', type: 'TEST' },
                { text: 'Test Case 1: Valid PO, Preferred, < $5k...', type: 'TEST' },
                { text: '... Task [E] Route based on Logic', type: 'ACTION' },
                { text: 'DECISION: Branch 4 matched. Next task: [F]', type: 'DECISION' },
                { text: 'Task [F] Auto-Approve & Pay', type: 'ACTION' },
                { text: 'Calling Tool: `quickbooks_tool.log_and_pay_bill(...)`', type: 'TOOL' },
                { text: 'Test Case 1 PASSED.', type: 'SUCCESS' },
                { text: 'Test Case 2: Valid PO, Preferred, > $5k...', type: 'TEST' },
                { text: '... Task [E] Route based on Logic', type: 'ACTION' },
                { text: 'DECISION: Branch 3 matched. Next task: [I]', type: 'DECISION' },
                { text: 'Task [I] Request Approval (#finance)', type: 'ACTION' },
                { text: 'Test Case 2 PASSED.', type: 'SUCCESS' },
                { text: 'Test Case 4: Valid PO, New Vendor...', type: 'TEST' },
                { text: '... Task [E] Route based on Logic', type: 'ACTION' },
                { text: 'DECISION: Branch 1 matched. Next task: [H]', type: 'DECISION' },
                { text: 'Task [H] Request Approval (#vendor-onboarding)', type: 'ACTION' },
                { text: 'Test Case 4 PASSED.', type: 'SUCCESS' },
                { text: 'Test Case 5: Invalid PO...', type: 'TEST' },
                { text: '... Task [C] Check PO Valid?', type: 'ACTION' },
                { text: 'Calling Tool: `quickbooks_tool.check_po("PO-INVALID")` -> `{"valid": false}`', type: 'TOOL' },
                { text: 'DECISION: PO is invalid. Next task: [G]', type: 'DECISION' },
                { text: 'Task [G] REJECT Invoice - Bad PO', type: 'ACTION' },
                { text: 'Test Case 5 PASSED.', type: 'SUCCESS' },
                { text: '... (Skipping Test 3 for brevity) ...', type: 'INFO' },
                { text: 'Test Suite Complete. 5/5 Passed.', type: 'SUCCESS' },
            ];

            addLog(containers.testLog, logSteps, () => {
                setLoading(buttons.runTest, false);
                containers.testLiveIndicator.innerHTML = `<div class="w-2 h-2 bg-gray-400 rounded-full"></div><span class="text-xs font-medium text-gray-400">COMPLETED</span>`;
                containers.deployButtonWrapper.style.display = 'block';
            });
        });
        
        buttons.proceedToDeploy.addEventListener('click', () => {
            showStage(6);
        });

        buttons.publish.addEventListener('click', () => {
            setLoading(buttons.publish, true, 'Publishing');
            containers.deployLogWrapper.style.display = 'flex';
            
            const deploySteps = [
                { text: 'Packaging agent code...', type: 'INFO' },
                { text: 'Packaging UI components...', type: 'INFO' },
                { text: 'Packaging test results...', type: 'INFO' },
                { text: 'Connecting to Enterprise Platform...', type: 'INFO' },
                { text: 'Authenticating...', type: 'INFO' },
                { text: 'Pushing agent to registry: `inv-processor:v1.0.0`', type: 'INFO' },
                { text: 'Registering UI components...', type: 'INFO' },
                { text: 'Activating trigger: `email:invoices@mycompany.com`', type: 'INFO' },
                { text: 'Deployment complete. Agent is now live.', type: 'SUCCESS' },
            ];
            
            addLog(containers.deployLog, deploySteps, () => {
                setLoading(buttons.publish, false);
                buttons.publish.innerHTML = `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-5 h-5 mr-2"><path d="M4.5 16.5c-1.5 1.5-3 1.5-4.5 0s1.5-3 0-4.5L5.5 8l4 4L16 8.5l4 4L19.5 16c-1.5 1.5-3 1.5-4.5 0s1.5-3 0-4.5L12 8l-3 3-1.5 1.5Z"/><path d="m12 15 6 6"/><path d="m21 21-6-6"/></svg> Published`;
                buttons.publish.disabled = true;
            });
        });

    </script>
</body>
</html>
